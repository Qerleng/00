# port: 7890
# socks-port: 7891
mixed-port: 7890
redir-port: 9797
tproxy-port: 9898


ipv6: false
log-level: silent
find-process-mode: strict
mode: rule
allow-lan: true
bind-address: '*'
# keep-alive-interval: 10
skip-auth-prefixes: 
  - 127.0.0.1/8
  - ::1/128
lan-allowed-ips: 
  - 0.0.0.0/0
  - ::/0
lan-disallowed-ips: 
  - 192.168.0.3/32


external-controller: 0.0.0.0:9090 
# secret: "123456"
external-ui: /data/adb/box/clash/dashboard


profile:
  store-selected: false
  store-fake-ip: false


tun:
  enable: false
  device: utun
  mtu: 9000
  stack: system # gvisor / lwip / system
# auto-detect-interface: true
  auto-route: true
  strict-route: true
  dns-hijack:
    - any:53
    - tcp://any:53
  inet4-route-address: # 启用 auto-route 时使用自定义路由而不是默认路由
    - 0.0.0.0/1
    - 128.0.0.0/1
  inet6-route-address: # 启用 auto-route 时使用自定义路由而不是默认路由
    - "::/1"
    - "8000::/1"

ntp:
  enable: true
  write-to-system: true
# server: time.android.com
  port: 123
  interval: 30


dns:
  cache-algorithm: arc
  enable: true
  ipv6: true
# prefer-h3: true
  listen: 0.0.0.0:53
  use-hosts: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
  default-nameserver:
    # - 114.114.114.114
    - 8.8.8.8
    # cloudflare
    - 1.1.1.1
    # - tls://223.5.5.5:853
    # - https://223.5.5.5/dns-query
  nameserver:
    # google
    - 8.8.8.8
    - 1.0.0.1
  nameserver-policy:
#   - 'www.baidu.com': '114.114.114.114'
#   - '+.internal.crop.com': '10.0.0.1'
#   - "geosite:cn,private,apple":
#   - https://doh.pub/dns-query
#   - https://dns.alidns.com/dns-query
#   - "geosite:category-ads-all": rcode://success
#   - "www.baidu.com,+.google.cn": [223.5.5.5, https://dns.alidns.com/dns-query]
#   - "rule-set:global,dns": 8.8.8.8
# 且 behavior 必须为 domain/classical，当为 classical 时仅会生效域名类规则
